IF OBJECT_ID('dbo.FEEncabezado', 'U') IS NOT NULL DROP TABLE dbo.FEEncabezado;
CREATE TABLE dbo.FEEncabezado (
  [TipoeCF] NVARCHAR(MAX) NULL,
  [ENCF] NVARCHAR(MAX) NOT NULL,
  [FechaVencimientoSecuencia] DATE NULL,
  [IndicadorNotaCredito] BIT NULL,
  [IndicadorEnvioDiferido] BIT NULL,
  [IndicadorMontoGravado] BIT NULL,
  [TipoIngresos] NVARCHAR(MAX) NULL,
  [TipoPago] NVARCHAR(MAX) NULL,
  [FechaLimitePago] DATE NULL,
  [TerminoPago] NVARCHAR(MAX) NULL,
  [FormaPago1] INT NULL,
  [MontoPago1] DECIMAL(38,10) NULL,
  [FormaPago2] INT NULL,
  [MontoPago2] DECIMAL(38,10) NULL,
  [FormaPago3] INT NULL,
  [MontoPago3] DECIMAL(38,10) NULL,
  [FormaPago4] INT NULL,
  [MontoPago4] DECIMAL(38,10) NULL,
  [FormaPago5] INT NULL,
  [MontoPago5] DECIMAL(38,10) NULL,
  [FormaPago6] INT NULL,
  [MontoPago6] DECIMAL(38,10) NULL,
  [FormaPago7] INT NULL,
  [MontoPago7] DECIMAL(38,10) NULL,
  [TipoCuentaPago] NVARCHAR(MAX) NULL,
  [NumeroCuentaPago] NVARCHAR(MAX) NULL,
  [BancoPago] INT NULL,
  [FechaDesde] DATE NULL,
  [FechaHasta] DATE NULL,
  [TotalPaginas] INT NULL,
  [RNCEmisor] NVARCHAR(MAX) NULL,
  [RazonSocialEmisor] NVARCHAR(MAX) NULL,
  [NombreComercial] NVARCHAR(MAX) NULL,
  [Sucursal] NVARCHAR(MAX) NULL,
  [DireccionEmisor] NVARCHAR(MAX) NULL,
  [Municipio] NVARCHAR(MAX) NULL,
  [Provincia] NVARCHAR(MAX) NULL,
  [TelefonoEmisor1] NVARCHAR(MAX) NULL,
  [TelefonoEmisor2] NVARCHAR(MAX) NULL,
  [TelefonoEmisor3] NVARCHAR(MAX) NULL,
  [CorreoEmisor] NVARCHAR(MAX) NULL,
  [WebSite] NVARCHAR(MAX) NULL,
  [ActividadEconomica] NVARCHAR(MAX) NULL,
  [CodigoVendedor] NVARCHAR(MAX) NULL,
  [NumeroFacturaInterna] NVARCHAR(MAX) NULL,
  [NumeroPedidoInterno] NVARCHAR(MAX) NULL,
  [ZonaVenta] NVARCHAR(MAX) NULL,
  [RutaVenta] NVARCHAR(MAX) NULL,
  [InformacionAdicionalEmisor] NVARCHAR(MAX) NULL,
  [FechaEmision] DATE NULL,
  [RNCComprador] NVARCHAR(MAX) NULL,
  [IdentificadorExtranjero] NVARCHAR(MAX) NULL,
  [RazonSocialComprador] NVARCHAR(MAX) NULL,
  [ContactoComprador] NVARCHAR(MAX) NULL,
  [CorreoComprador] NVARCHAR(MAX) NULL,
  [DireccionComprador] NVARCHAR(MAX) NULL,
  [MunicipioComprador] NVARCHAR(MAX) NULL,
  [ProvinciaComprador] NVARCHAR(MAX) NULL,
  [PaisComprador] NVARCHAR(MAX) NULL,
  [FechaEntrega] DATE NULL,
  [ContactoEntrega] NVARCHAR(MAX) NULL,
  [DireccionEntrega] NVARCHAR(MAX) NULL,
  [TelefonoAdicional] NVARCHAR(MAX) NULL,
  [FechaOrdenCompra] DATE NULL,
  [NumeroOrdenCompra] NVARCHAR(MAX) NULL,
  [CodigoInternoComprador] NVARCHAR(MAX) NULL,
  [ResponsablePago] NVARCHAR(MAX) NULL,
  [Informacionadicionalcomprador] NVARCHAR(MAX) NULL,
  [NumeroEmbarque] NVARCHAR(MAX) NULL,
  [NumeroContenedor] NVARCHAR(MAX) NULL,
  [NumeroReferencia] NVARCHAR(MAX) NULL,
  [NombrePuertoEmbarque] NVARCHAR(MAX) NULL,
  [CondicionesEntrega] NVARCHAR(MAX) NULL,
  [TotalFob] DECIMAL(38,10) NULL,
  [Seguro] DECIMAL(38,10) NULL,
  [Flete] DECIMAL(38,10) NULL,
  [OtrosGastos] DECIMAL(38,10) NULL,
  [TotalCif] DECIMAL(38,10) NULL,
  [RegimenAduanero] NVARCHAR(MAX) NULL,
  [NombrePuertoSalida] NVARCHAR(MAX) NULL,
  [NombrePuertoDesembarque] NVARCHAR(MAX) NULL,
  [PesoBruto] DECIMAL(38,10) NULL,
  [PesoNeto] DECIMAL(38,10) NULL,
  [UnidadPesoBruto] INT NULL,
  [UnidadPesoNeto] INT NULL,
  [CantidadBulto] DECIMAL(38,10) NULL,
  [UnidadBulto] INT NULL,
  [VolumenBulto] DECIMAL(38,10) NULL,
  [UnidadVolumen] INT NULL,
  [ViaTransporte] NVARCHAR(MAX) NULL,
  [PaisOrigen] NVARCHAR(MAX) NULL,
  [DireccionDestino] NVARCHAR(MAX) NULL,
  [PaisDestino] NVARCHAR(MAX) NULL,
  [RNCIdentificacionCompaniaTransportista] NVARCHAR(MAX) NULL,
  [NombreCompaniaTransportista] NVARCHAR(MAX) NULL,
  [NumeroViaje] NVARCHAR(MAX) NULL,
  [Conductor] NVARCHAR(MAX) NULL,
  [DocumentoTransporte] NVARCHAR(MAX) NULL,
  [Ficha] NVARCHAR(MAX) NULL,
  [Placa] NVARCHAR(MAX) NULL,
  [RutaTransporte] NVARCHAR(MAX) NULL,
  [ZonaTransporte] NVARCHAR(MAX) NULL,
  [NumeroAlbaran] NVARCHAR(MAX) NULL,
  [MontoGravadoTotal] DECIMAL(38,10) NULL,
  [MontoGravadoI1] DECIMAL(38,10) NULL,
  [MontoGravadoI2] DECIMAL(38,10) NULL,
  [MontoGravadoI3] DECIMAL(38,10) NULL,
  [MontoExento] DECIMAL(38,10) NULL,
  [ITBIS1] DECIMAL(38,10) NULL,
  [ITBIS2] DECIMAL(38,10) NULL,
  [ITBIS3] DECIMAL(38,10) NULL,
  [TotalITBIS] DECIMAL(38,10) NULL,
  [TotalITBIS1] DECIMAL(38,10) NULL,
  [TotalITBIS2] DECIMAL(38,10) NULL,
  [TotalITBIS3] DECIMAL(38,10) NULL,
  [MontoImpuestoAdicional] DECIMAL(38,10) NULL,
  [TipoImpuesto1] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicional1] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecifico1] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvalorem1] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionales1] DECIMAL(38,10) NULL,
  [TipoImpuesto2] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicional2] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecifico2] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvalorem2] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionales2] DECIMAL(38,10) NULL,
  [TipoImpuesto3] NVARCHAR(MAX) NULL,
  [TasaImpuestoAdicional3] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecifico3] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvalorem3] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionales3] DECIMAL(38,10) NULL,
  [TipoImpuesto4] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicional4] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecifico4] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvalorem4] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionales4] DECIMAL(38,10) NULL,
  [MontoTotal] DECIMAL(38,10) NULL,
  [MontoNoFacturable] DECIMAL(38,10) NULL,
  [MontoPeriodo] DECIMAL(38,10) NULL,
  [SaldoAnterior] DECIMAL(38,10) NULL,
  [MontoAvancePago] DECIMAL(38,10) NULL,
  [ValorPagar] DECIMAL(38,10) NULL,
  [TotalITBISRetenido] DECIMAL(38,10) NULL,
  [TotalISRRetencion] DECIMAL(38,10) NULL,
  [TotalITBISPercepcion] DECIMAL(38,10) NULL,
  [TotalISRPercepcion] DECIMAL(38,10) NULL,
  [TipoMoneda] DECIMAL(38,10) NULL,
  [TipoCambio] DECIMAL(38,10) NULL,
  [MontoGravadoTotalOtraMoneda] DECIMAL(38,10) NULL,
  [MontoGravado1OtraMoneda] DECIMAL(38,10) NULL,
  [MontoGravado2OtraMoneda] DECIMAL(38,10) NULL,
  [MontoGravado3OtraMoneda] DECIMAL(38,10) NULL,
  [MontoExentoOtraMoneda] DECIMAL(38,10) NULL,
  [TotalITBISOtraMoneda] DECIMAL(38,10) NULL,
  [TotalITBIS1OtraMoneda] DECIMAL(38,10) NULL,
  [TotalITBIS2OtraMoneda] DECIMAL(38,10) NULL,
  [TotalITBIS3OtraMoneda] DECIMAL(38,10) NULL,
  [MontoImpuestoAdicionalOtraMoneda] DECIMAL(38,10) NULL,
  [TipoImpuestoOtraMoneda1] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicionalOtraMoneda1] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecificoOtraMoneda1] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvaloremOtraMoneda1] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionalesOtraMoneda1] DECIMAL(38,10) NULL,
  [TipoImpuestoOtraMoneda2] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicionalOtraMoneda2] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecificoOtraMoneda2] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvaloremOtraMoneda2] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionalesOtraMoneda2] DECIMAL(38,10) NULL,
  [TipoImpuestoOtraMoneda3] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicionalOtraMoneda3] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecificoOtraMoneda3] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvaloremOtraMoneda3] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionalesOtraMoneda3] DECIMAL(38,10) NULL,
  [TipoImpuestoOtraMoneda4] DECIMAL(38,10) NULL,
  [TasaImpuestoAdicionalOtraMoneda4] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoEspecificoOtraMoneda4] DECIMAL(38,10) NULL,
  [MontoImpuestoSelectivoConsumoAdvaloremOtraMoneda4] DECIMAL(38,10) NULL,
  [OtrosImpuestosAdicionalesOtraMoneda4] DECIMAL(38,10) NULL,
  [MontoTotalOtraMoneda] DECIMAL(38,10) NULL,
  [NCFModificado] NVARCHAR(MAX) NULL,
  [FechaNCFModificado] DATE NULL,
  [CodigoModificacion] INT NULL,
  CONSTRAINT PK_FEEncabezado PRIMARY KEY ([ENCF])
);

IF OBJECT_ID('dbo.FEDetalle', 'U') IS NOT NULL DROP TABLE dbo.FEDetalle;
CREATE TABLE dbo.FEDetalle (
  [ENCF] NVARCHAR(MAX) NOT NULL,
  [NumeroLinea] INT NOT NULL,
  [TipoeCF] NVARCHAR(MAX) NULL,
  [RNCEmisor] NVARCHAR(MAX) NULL,
  [eNCF] NVARCHAR(MAX) NULL,
  [TipoCodigo1] NVARCHAR(MAX) NULL,
  [CodigoItem1] NVARCHAR(MAX) NULL,
  [TipoCodigo2] NVARCHAR(MAX) NULL,
  [CodigoItem2] NVARCHAR(MAX) NULL,
  [TipoCodigo3] NVARCHAR(MAX) NULL,
  [CodigoItem3] NVARCHAR(MAX) NULL,
  [TipoCodigo4] NVARCHAR(MAX) NULL,
  [CodigoItem4] NVARCHAR(MAX) NULL,
  [TipoCodigo5] NVARCHAR(MAX) NULL,
  [CodigoItem5] NVARCHAR(MAX) NULL,
  [IndicadorFacturacion] INT NULL,
  [IndicadorAgenteRetencionoPercepcion] INT NULL,
  [MontoITBISRetenido] DECIMAL(38,10) NULL,
  [MontoISRRetenido] DECIMAL(38,10) NULL,
  [NombreItem] NVARCHAR(MAX) NULL,
  [IndicadorBienoServicio] INT NULL,
  [DescripcionItem] NVARCHAR(MAX) NULL,
  [CantidadItem] DECIMAL(38,10) NULL,
  [UnidadMedida] NVARCHAR(MAX) NULL,
  [CantidadReferencia] DECIMAL(38,10) NULL,
  [UnidadReferencia] NVARCHAR(MAX) NULL,
  [Subcantidad1] DECIMAL(38,10) NULL,
  [CodigoSubcantidad1] INT NULL,
  [Subcantidad2] DECIMAL(38,10) NULL,
  [CodigoSubcantidad2] INT NULL,
  [Subcantidad3] DECIMAL(38,10) NULL,
  [CodigoSubcantidad3] INT NULL,
  [Subcantidad4] DECIMAL(38,10) NULL,
  [CodigoSubcantidad4] INT NULL,
  [Subcantidad5] DECIMAL(38,10) NULL,
  [CodigoSubcantidad5] INT NULL,
  [GradosAlcohol] DECIMAL(38,10) NULL,
  [PrecioUnitarioReferencia] DECIMAL(38,10) NULL,
  [FechaElaboracion] DATE NULL,
  [PesoNetoKilogramo] DECIMAL(38,10) NULL,
  [PesoNetoMineria] DECIMAL(38,10) NULL,
  [TipoAfiliacion] INT NULL,
  [Liquidacion] INT NULL,
  [PrecioUnitarioItem] DECIMAL(38,10) NULL,
  [DescuentoMonto] DECIMAL(38,10) NULL,
  [TipoSubDescuento1] INT NULL,
  [SubDescuentoPorcentaje1] DECIMAL(38,10) NULL,
  [MontoSubDescuento1] DECIMAL(38,10) NULL,
  [TipoSubDescuento2] INT NULL,
  [SubDescuentoPorcentaje2] DECIMAL(38,10) NULL,
  [MontoSubDescuento2] DECIMAL(38,10) NULL,
  [TipoSubDescuento3] INT NULL,
  [SubDescuentoPorcentaje3] DECIMAL(38,10) NULL,
  [MontoSubDescuento3] DECIMAL(38,10) NULL,
  [TipoSubDescuento4] INT NULL,
  [SubDescuentoPorcentaje4] DECIMAL(38,10) NULL,
  [MontoSubDescuento4] DECIMAL(38,10) NULL,
  [TipoSubDescuento5] INT NULL,
  [SubDescuentoPorcentaje5] DECIMAL(38,10) NULL,
  [MontoSubDescuento5] DECIMAL(38,10) NULL,
  [MontoRecargo] DECIMAL(38,10) NULL,
  [TipoSubRecargo1] INT NULL,
  [SubRecargoPorcentaje1] DECIMAL(38,10) NULL,
  [MontosubRecargo1] DECIMAL(38,10) NULL,
  [TipoSubRecargo2] INT NULL,
  [SubRecargoPorcentaje2] DECIMAL(38,10) NULL,
  [MontosubRecargo2] DECIMAL(38,10) NULL,
  [TipoSubRecargo3] INT NULL,
  [SubRecargoPorcentaje3] DECIMAL(38,10) NULL,
  [MontosubRecargo3] DECIMAL(38,10) NULL,
  [TipoSubRecargo4] INT NULL,
  [SubRecargoPorcentaje4] DECIMAL(38,10) NULL,
  [MontosubRecargo4] DECIMAL(38,10) NULL,
  [TipoSubRecargo5] INT NULL,
  [SubRecargoPorcentaje5] DECIMAL(38,10) NULL,
  [MontosubRecargo5] DECIMAL(38,10) NULL,
  [TipoImpuesto1] INT NULL,
  [TipoImpuesto2] INT NULL,
  [PrecioOtraMoneda] DECIMAL(38,10) NULL,
  [DescuentoOtraMoneda] DECIMAL(38,10) NULL,
  [RecargoOtraMoneda] DECIMAL(38,10) NULL,
  [MontoItemOtraMoneda] DECIMAL(38,10) NULL,
  [MontoItem] DECIMAL(38,10) NULL,
  CONSTRAINT PK_FEDetalle PRIMARY KEY ([ENCF],[NumeroLinea]),
  CONSTRAINT FK_FEDetalle_FEEncabezado FOREIGN KEY ([ENCF]) REFERENCES dbo.FEEncabezado([ENCF])
);
